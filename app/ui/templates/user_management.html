<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Management - DeepVision Monitoring Center</title>
  <style>
    /* Previous styles remain the same... */

    /* Add these new styles for toast notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .toast {
      padding: 1rem;
      margin-bottom: 1rem;
      border-radius: 0.375rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      animation: slideIn 0.3s ease-out;
      max-width: 350px;
    }

    .toast-success {
      background-color: #d1e7dd;
      color: #0f5132;
      border: 1px solid #badbcc;
    }

    .toast-error {
      background-color: #f8d7da;
      color: #842029;
      border: 1px solid #f5c2c7;
    }

    .toast-close {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.25rem;
      margin-left: 1rem;
      color: inherit;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      from {
        opacity: 1;
      }
      to {
        opacity: 0;
      }
    }

    /* Previous styles remain the same... */
  </style>
</head>
<body>
    {% extends "base.html" %}
    {% block content %}
      <h1 class="page-title">User Management</h1>
      
      <!-- Toast notifications container -->
      <div class="toast-container" id="toastContainer">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="toast toast-{{ category }}" id="toast-{{ loop.index }}">
                <span>{{ message }}</span>
                <button class="toast-close" onclick="dismissToast('toast-{{ loop.index }}')">&times;</button>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </div>

      <ul class="user-list">
        {% for user in users %}
          <li class="user-item">
            <div class="user-details">
              <div class="user-name">{{ user.username }}</div>
              <div class="user-email">{{ user.email }}</div>
              <span class="user-role {% if user.is_active %}{{ user.role }}{% else %}deactivated{% endif %}">
                {% if user.is_active %}
                  {{ user.role | capitalize }}
                {% else %}
                  Deactivated
                {% endif %}
              </span>
            </div>
            <div class="user-actions">
              <a href="{{ url_for('edit_user', user_id=user.id) }}" class="btn-action">Edit</a>
              {% if user.is_active %}
                <a href="{{ url_for('deactivate_user', user_id=user.id) }}" class="btn-action">Deactivate</a>
              {% else %}
                <a href="{{ url_for('reactivate_user', user_id=user.id) }}" class="btn-action">Reactivate</a>
              {% endif %}
            </div>
          </li>
        {% endfor %}
      </ul>

      <a href="{{ url_for('create_user') }}" class="btn-primary">Create New User</a>

      <script>
        // Auto-dismiss toasts after 5 seconds
        document.addEventListener('DOMContentLoaded', function() {
          const toasts = document.querySelectorAll('.toast');
          toasts.forEach(toast => {
            setTimeout(() => {
              toast.style.animation = 'fadeOut 0.5s ease-out';
              setTimeout(() => toast.remove(), 500);
            }, 5000);
          });
        });

        function dismissToast(id) {
          const toast = document.getElementById(id);
          if (toast) {
            toast.style.animation = 'fadeOut 0.5s ease-out';
            setTimeout(() => toast.remove(), 500);
          }
        }
      </script>
    {% endblock %}
</body>
</html>